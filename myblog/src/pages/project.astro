---
import Layout from '../layouts/Layout.astro';


// Force static rendering for this page
export const prerender = true;

// Add type safety
interface Project {
  title: string;
  description: string;
  github: string;
  image: string;
}

interface ProjectData {
  serious: Project[];
  fun: Project[];
}

const projects: ProjectData = {
  serious: [
    {
      title: 'NotesAI',
      description: "Convert long, messy PDFs into clean, aesthetic notes. Built with a core RAG engine ",
      github: 'https://notes-ai-bay.vercel.app/',
      image: '/images/notesai1.png'
    },
    {
      title: 'zTutor',
      description: "Your Personal AI Video Tutor - Generate professional educational videos with just a prompt",
      github: 'https://ztutor.app/',
      image: '/images/ztutor.png'
    },
    {
      title: 'arXiv-gram',
      description: "Instagram for research  papers-Scroll through research papers from arXiv, bookmark them, filter them and search them, all at one place",
      github: 'https://arxiv-gram.vercel.app/',
      image: '/images/arxiv.png'
    },
    {
      title: 'Bhagavad-Gita-GPT',
      description: "An AI-powered chatbot that responds like Lord Krishna, offering wisdom, guidance, and Bhagavad Gita verses to help with life's challenges.",
      github: 'https://bhagavad-gita-gpt-xi.vercel.app/',
      image: '/images/bgitagpt.png'
    },
    {
      title: 'YouTube to MindMap Generator',
      description: 'Built a YouTube-to-mindmap website that summarizes videos and generates downloadable, interactive mind maps. This was built ~3 months before Google introduced a similar feature in NotebookLM.',
      github: 'https://github.com/Gagancreates/youtube-mindmap-generator',
      image: '/images/ytmindmap.png'
    }
  ],
  fun: [
    {
      title: 'Daily Dose of Knowledge',
      description: 'Built a micro-learning platform that delivers daily articles, quizzes, and resources based on user interests, designed to replace social media with skill-compounding learning in free time.',
      github: 'https://dailydoseofknowledge.vercel.app/',
      image: '/images/ddok.png'
    },
    {
      title: 'Mailstone',
      description: 'Built Mailstone, a personalized motivation system that keeps users consistent with their goals through daily, tone-aware emails inspired by their chosen visionary, powered by Gemini API, Firebase, and Nodemailer.',
      github: 'https://github.com/Gagancreates/mailstone',
      image: '/images/mailstone.png'
    },
    {
      title: 'Personal Blog',
      description: 'The same website which you are on right now',
      github: 'https://gaganp.com/',
      image: '/images/blog.png'
    },
    {
      title: 'Resume Generator',
      description: 'Built a resume generator that transforms user inputs into a clean, professional resume and exports it as a downloadable PDF using html2canvas and jsPDF.',
      github: 'https://github.com/Gagancreates/resume-generator',
      image: '/images/resume.png'
    }
  ]
};

// Improve error handling to prevent blank pages
const seriousProjects = projects?.serious || [];
const funProjects = projects?.fun || [];

// Add error boundary
let hasError = false;
try {
  if (!seriousProjects.length && !funProjects.length) {
    console.error('No projects found');
    hasError = true;
  }
} catch (error) {
  console.error('Error in project data:', error);
  hasError = true;
}
---

<Layout title="Projects | Gagan P">
  <main class="container mx-auto px-4 py-8 sm:py-12">
    {hasError ? (
      <div class="max-w-5xl mx-auto text-center">
        <h1 class="text-2xl font-bold text-red-600">Something went wrong</h1>
        <p class="mt-4 text-gray-600">Please try refreshing the page</p>
      </div>
    ) : (
      <div class="max-w-5xl mx-auto">
        <h1 class="font-zt text-5xl sm:text-6xl mb-8 sm:mb-12 text-center">Projects</h1>
        
        <div class="space-y-12 sm:space-y-16">
          <section class="group">
            <div class="flex items-center justify-between mb-4 sm:mb-6">
              <h2 class="font-zt text-2xl sm:text-3xl">Main Projects</h2>
              <span class="font-mono text-sm sm:text-base opacity-50 group-hover:opacity-100 transition-opacity">
                {seriousProjects.length} projects
              </span>
            </div>
            
            <div class="space-y-4 sm:space-y-6">
              {seriousProjects.map(project => (
                <article class="relative flex flex-col sm:flex-row gap-4 sm:gap-6 p-4 sm:p-8 rounded-2xl 
                  bg-gradient-to-br from-white/80 to-stone-50/60 dark:from-stone-900/60 dark:to-stone-800/40
                  shadow-[0_15px_35px_-5px_rgb(0,0,0,0.1)]
                  border border-rose-300
                  backdrop-blur-sm
                  dark:border-white/20
                  dark:shadow-[0_15px_35px_-5px_rgb(0,0,0,0.3)]
                  transform-gpu">
                  {project.image && (
                    <div class="relative w-full sm:w-80 h-40 sm:h-44 flex-shrink-0 rounded-xl overflow-hidden border border-black/30 dark:border-white/30">
                      <img 
                        src={project.image} 
                        alt={project.title}
                        class="w-full h-full object-cover"
                      />
                    </div>
                  )}
                  <div class="flex-grow min-w-0">
                    <div class="flex items-center justify-between mb-3 sm:mb-8">
                      <div class="flex items-center gap-3">
                        <h3 class="font-space font-medium  text-lg sm:text-xl text-slate-900 dark:text-slate-50">
                          <a
                            href={project.github}
                            target="_blank"
                            rel="noopener noreferrer"
                            class="inline-flex items-center gap-1.5 transition-colors hover:text-rose-600 dark:hover:text-indigo-400"
                          >
                            {project.title}
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 flex-shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                              <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                              <polyline points="15 3 21 3 21 9"></polyline>
                              <line x1="10" y1="14" x2="21" y2="3"></line>
                            </svg>
                          </a>
                        </h3>
                      </div>
                    </div>
                    <p class="font-space text-slate-700 dark:text-slate-200/70 text-sm sm:text-base mb-3 sm:mb-4 leading-relaxed">{project.description}</p>
                    
                  </div>
                </article>
              ))}
            </div>
          </section>

          <section class="group">
            <div class="flex items-center justify-between mb-4 sm:mb-6">
              <h2 class="font-zt text-2xl sm:text-3xl">Side Projects</h2>
              <span class="font-mono text-sm sm:text-base opacity-50 group-hover:opacity-100 transition-opacity">
                {funProjects.length} projects
              </span>
            </div>
            
            <div class="space-y-4 sm:space-y-6">
              {funProjects.map(project => (
                <article class="relative flex flex-col sm:flex-row gap-4 sm:gap-6 p-4 sm:p-8 rounded-2xl 
                  bg-gradient-to-br from-white/80 to-stone-50/60 dark:from-stone-900/60 dark:to-stone-800/40
                  shadow-[0_15px_35px_-5px_rgb(0,0,0,0.1)]
                  border border-rose-300
                  backdrop-blur-sm
                  dark:border-white/20
                  dark:shadow-[0_15px_35px_-5px_rgb(0,0,0,0.3)]
                  transform-gpu">
                  {project.image && (
                    <div class="relative w-full sm:w-80 h-40 sm:h-44 flex-shrink-0 rounded-xl overflow-hidden border border-black/30 dark:border-white/30">
                      <img 
                        src={project.image} 
                        alt={project.title}
                        class="w-full h-full object-cover"
                      />
                    </div>
                  )}
                  <div class="flex-grow min-w-0">
                    <div class="flex items-center justify-between mb-3 sm:mb-8">
                      <div class="flex items-center gap-3">
                        <h3 class="font-space font-medium text-lg sm:text-xl text-slate-900 dark:text-slate-50">
                          <a
                            href={project.github}
                            target="_blank"
                            rel="noopener noreferrer"
                            class="inline-flex items-center gap-1.5 transition-colors hover:text-indigo-600 dark:hover:text-rose-400"
                          >
                            {project.title}
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 flex-shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                              <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                              <polyline points="15 3 21 3 21 9"></polyline>
                              <line x1="10" y1="14" x2="21" y2="3"></line>
                            </svg>
                          </a>
                        </h3>
                      </div>
                    </div>
                    <p class="font-space text-slate-700 dark:text-slate-200/70 text-sm sm:text-base mb-3 sm:mb-4 leading-relaxed">{project.description}</p>
                    
                  </div>
                </article>
              ))}
            </div>
          </section>
        </div>
      </div>
    )}
  </main>
</Layout>

<script>
  // Add client-side error handling
  window.addEventListener('error', (event) => {
    console.error('Client-side error:', event.error);
    // Optionally show a user-friendly error message
    const main = document.querySelector('main');
    if (main) {
      main.innerHTML = `        <div class="max-w-5xl mx-auto text-center">
          <h1 class="text-2xl font-bold text-red-600">Something went wrong</h1>
          <p class="mt-4 text-gray-600">Please try refreshing the page</p>
        </div>
      `;
    }
  });
</script>

<style>
  /* Fade-in animation for articles */
  article {
    animation: fadeIn 0.5s ease-out forwards;
    opacity: 0;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Stagger the animations */
  article:nth-child(1) { animation-delay: 0.1s; }
  article:nth-child(2) { animation-delay: 0.2s; }
  article:nth-child(3) { animation-delay: 0.3s; }
  article:nth-child(4) { animation-delay: 0.4s; }
  article:nth-child(5) { animation-delay: 0.5s; }

  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: rgba(180, 180, 185, 0.3);
    border-radius: 4px;
  }

  .dark ::-webkit-scrollbar-thumb {
    background: rgba(180, 180, 185, 0.2);
  }

  /* Smooth transitions */
  * {
    transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
  }
</style>